(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;$.Define($$,{Website:{Forms:{BasicInfoForm:function(){var w;return c.$(c.$((w=function(x){return function(y){return{Name:x,Age:y};};},d.Return(w)),f.Input("Name","Please enter your name")),f.InputInt("Age","Please enter a valid age"));},ContactInfoForm:function(){var z,A,B,C,F,G,K;z=(A=f.Input("Phone","Empty phone number not allowed"),(B=(C=function(D){return{$:0,$0:D};},function(E){return d.Map(C,E);}),B(A)));F=c.$(c.$(c.$((G=function(H){return function(I){return function(J){return{$:1,$0:{Street:H,City:I,Country:J}};};};},d.Return(G)),f.Input("Street","Empty street not allowed")),f.Input("City","Empty city not allowed")),f.Input("Country","Empty country not allowed"));K=d.Do();return K.Delay(function(){var M,N,O,Q;return K.Bind((M=(N=g.ofArray([["Phone",z],["Address",F]]),(O=function(P){return h.Select(0,P);},O(N))),(Q=function(R){return i.WithTextLabel("Contact Method",R);},Q(M))),function(S){return K.ReturnFrom(S);});});},Input:function(T,U){var V,W,X,Y,_0,_2;V=(W=(X=h.Input(""),(Y=function(Z){return c.Validator().IsNotEmpty(U,Z);},Y(X))),(_0=function(_1){return i.WithValidationIcon(_1);},_0(W)));_2=function(_3){return i.WithTextLabel(T,_3);};return _2(V);},InputInt:function(_4,_5){var _6,_7,_8,_9,_,ba,bc,be,bf;_6=(_7=(_8=(_9=h.Input(""),(_=c.Validator().IsInt(_5),_(_9))),(ba=function(bb){return i.WithValidationIcon(bb);},ba(_8))),(bc=function(bd){return i.WithTextLabel(_4,bd);},bc(_7)));be=(bf=function(bg){return bg<<0;},function(bg){return d.Map(bf,bg);});return be(_6);},LoginForm:function(bh){var bi,bj,bk,bl,bm,bo,bq,bs,bt,bu,bv,bw,by,bA,bC,bD,bG,bH,bU;bi=(bj=(bk=(bl=h.Input(""),(bm=function(bn){return c.Validator().IsNotEmpty("Enter Username",bn);},bm(bl))),(bo=function(bp){return i.WithValidationIcon(bp);},bo(bk))),(bq=function(br){return i.WithTextLabel("Username",br);},bq(bj)));bs=(bt=(bu=(bv=h.Password(""),(bw=function(bx){return c.Validator().IsNotEmpty("Enter Password",bx);},bw(bv))),(by=function(bz){return i.WithValidationIcon(bz);},by(bu))),(bA=function(bB){return i.WithTextLabel("Password",bB);},bA(bt)));bC=c.$(c.$((bD=function(bE){return function(bF){return{Name:bE,Password:bF};};},d.Return(bD)),bi),bs);bG=(bH=d.Do(),bH.Delay(function(){var bJ,bK,bL,bM,bN;return bH.Bind((bJ=(bK=(bL=j.get_Default(),$.New(j,{Label:{$:1,$0:"Login"},Style:bL.Style,Class:bL.Class})),(bM=(bN=j.get_Default(),$.New(j,{Label:{$:1,$0:"Reset"},Style:bN.Style,Class:bN.Class})),function(bO){return i.WithCustomSubmitAndResetButtons(bK,bM,bO);})),bJ(bC)),function(bP){var bQ,bR;return bH.ReturnFrom((bQ=k.Async("Website:0",[bP]),(bR=function(bS){var bT;if(bS){bT=l;bT.location=bh;bh;return d.Return(null);}else{return f.WarningPanel("Login failed");}},f.WithLoadingPane(bQ,bR))));});}));bU=function(bV){return i.WithFormContainer(bV);};return bU(bG);},SignupSequence:function(){var bW,bX,bY,bZ,b1,b2,b3,b4,b5,b6,b8,b_,b$,cb,ce,cf,cg,ch,cj,ck,cl,cm,cn,co,cq,cs,ct,cv,cy,cS,cT,cX;bW=(bX=(bY=f.BasicInfoForm(),(bZ=function(b0){return i.WithSubmitAndResetButtons(b0);},bZ(bY))),(b1=(b2=(b3=m.get_Default(),(b4=(b5=(b6=function(b7){return{$:0,$0:b7};},b6("Please enter your name and age below.")),(b8=function(b9){return{$:1,$0:b9};},b8(b5))),$.New(m,{Header:(b_=(b$=function(ca){return{$:0,$0:ca};},b$("Step 1 - Your name and age")),(cb=function(cc){return{$:1,$0:cc};},cb(b_))),Padding:b3.Padding,Description:b4,BackgroundColor:b3.BackgroundColor,BorderColor:b3.BorderColor,CssClass:b3.CssClass,Style:b3.Style}))),function(cd){return i.WithCustomFormContainer(b2,cd);}),b1(bX)));ce=(cf=(cg=f.ContactInfoForm(),(ch=function(ci){return i.WithSubmitAndResetButtons(ci);},ch(cg))),(cj=(ck=(cl=m.get_Default(),(cm=(cn=(co=function(cp){return{$:0,$0:cp};},co("Please enter your phone number or your address below.")),(cq=function(cr){return{$:1,$0:cr};},cq(cn))),$.New(m,{Header:(cs=(ct=function(cu){return{$:0,$0:cu};},ct("Step 2 - Your preferred contact information")),(cv=function(cw){return{$:1,$0:cw};},cv(cs))),Padding:cl.Padding,Description:cm,BackgroundColor:cl.BackgroundColor,BorderColor:cl.BorderColor,CssClass:cl.CssClass,Style:cl.Style}))),function(cx){return i.WithCustomFormContainer(ck,cx);}),cj(cf)));cy=function(cz){return function(cA){return function(){var cC,cD,cE,cF,cG,cH,cI,cJ,cL,cM,cO,cP,cR;cC=cA.$==0?(cD=cA.$0,"the phone number: "+cD):(cE=cA.$0,"the address: "+cE.Street+", "+cE.City+", "+cE.Country);cF=g.ofArray([(cG=g.ofArray([o.Text("Sign-up summary")]),(cH=o.Tags(),cH.NewTag("legend",cG))),o.P(g.ofArray([(cI="Hi "+cz.Name+"!",(cJ=function(cK){return o.Text(cK);},cJ(cI)))])),o.P(g.ofArray([(cL="You are "+$$.String(cz.Age)+" years old",(cM=function(cN){return o.Text(cN);},cM(cL)))])),o.P(g.ofArray([(cO="Your preferred contact method is via "+cC,(cP=function(cQ){return o.Text(cQ);},cP(cO)))]))]);cR=o.Tags();return cR.NewTag("fieldset",cF);};};};cS=(cT=d.Do(),cT.Delay(function(){return cT.Bind(bW,function(cV){return cT.Bind(ce,function(cW){return cT.ReturnFrom(d.OfElement((cy(cV))(cW)));});});}));cX=function(cY){return d.Flowlet(cY);};return cX(cS);},WarningPanel:function(cZ){var c0;c0=d.Do();return c0.Delay(function(){var c2;return c0.Bind((c2=function(){return p.add(o.Div(g.ofArray([o.Attr().Class("warningPanel")])),g.ofArray([o.Text(cZ)]));},d.OfElement(c2)),function(){return c0.ReturnFrom(d.Never());});});},WithLoadingPane:function(c5,c6){var c7,c8;c7=(c8=function(){var c_,c$,da,db,dg;c_=o.Div(g.ofArray([o.Attr().Class("loadingPane")]));c$=r.New();da=(db=function(){var dd;dd=function(de){var df;df=$.New(u,{$:0,$0:de});c$.event.Trigger(df);return v.Return(null);};return v.Bind(c5,dd);},v.Delay(db));dg=function(dh){var di;di={$:0};return v.Start(dh);};dg(da);return[c_,function(dj){dj;},c$.event];},d.BuildFormlet(c8));return d.Replace(c7,c6);}},LoginControl:$.Class({get_Body:function(){return f.LoginForm(this.redirectUrl);}}),SignupSequenceControl:$.Class({get_Body:function(){return f.SignupSequence();}})}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlet);c=$.Safe(b.Data);d=$.Safe(b.Formlet);e=$.Safe($$.Website);f=$.Safe(e.Forms);g=$.Safe(a.List);h=$.Safe(b.Controls);i=$.Safe(b.Enhance);j=$.Safe(i.FormButtonConfiguration);k=$.Safe(a.Remoting);l=$.Safe($$.window);m=$.Safe(i.FormContainerConfiguration);n=$.Safe(a.Html);o=$.Safe(n.Default);p=$.Safe(n.Operators);q=$.Safe(a.Control);r=$.Safe(q["FSharpEvent`1"]);s=$.Safe($$.IntelliFactory.Formlet);t=$.Safe(s.Base);u=$.Safe(t["Result`1"]);return v=$.Safe(a.Concurrency);});$.OnLoad(function(){});}());
